# تنسيق التواريخ النسبية (Relative Date Formatting)

## نظرة عامة (Overview)

تم تحديث النظام لعرض التواريخ بشكل أكثر طبيعية وسهولة في القراءة باستخدام التنسيق النسبي بدلاً من التواريخ الكاملة.

## أمثلة على التنسيق (Formatting Examples)

### التواريخ المستقبلية (Future Dates)
تُستخدم لمواعيد التسليم:

- **اليوم 03:00 م** - موعد التسليم اليوم
- **غداً 10:00 ص** - موعد التسليم غداً
- **بعد غد 05:00 م** - موعد التسليم بعد غد
- **بعد يوم 02:00 م** - يوم واحد (1)
- **بعد يومان 02:00 م** - يومان (2)
- **بعد 3 أيام 02:00 م** - عدة أيام (3-10)
- **بعد 15 يوم 02:00 م** - أيام كثيرة (11+)
- **15 ديسمبر 2024، 03:00 م** - موعد التسليم بعد أكثر من أسبوع

### التواريخ الماضية (Past Dates)
تُستخدم لسجل النشاط والتعليقات:

- **الآن** - أقل من دقيقة
- **منذ دقيقة** - دقيقة واحدة (1)
- **منذ دقيقتان** - دقيقتان (2)
- **منذ 5 دقائق** - عدة دقائق (3-10)
- **منذ 15 دقيقة** - دقائق كثيرة (11+)
- **منذ ساعة** - ساعة واحدة (1)
- **منذ ساعتان** - ساعتان (2)
- **منذ 5 ساعات** - عدة ساعات (3-10)
- **منذ 12 ساعة** - ساعات كثيرة (11+)
- **أمس 08:00 م** - أمس
- **اليوم 09:00 ص** - وقت سابق اليوم
- **منذ يوم** - يوم واحد (1)
- **منذ يومان** - يومان (2)
- **منذ 5 أيام** - عدة أيام (3-10)
- **10 نوفمبر 2024** - أكثر من أسبوع

## الاستخدام في الكود (Code Usage)

### استيراد الدالة (Import)

```typescript
import { formatRelativeDate } from '../utils/dateUtils';
```

### الاستخدام الأساسي (Basic Usage)

```typescript
// عرض التاريخ مع الوقت
const dateWithTime = formatRelativeDate(timestamp, true);
// مثال: "اليوم 03:00 م" أو "منذ 5 دقائق"

// عرض التاريخ بدون الوقت
const dateOnly = formatRelativeDate(timestamp, false);
// مثال: "اليوم" أو "منذ 5 دقائق"
```

### أمثلة من المكونات (Component Examples)

#### في DeadlineBadge
```typescript
const formatDeadline = (): string => {
  return formatRelativeDate(deadline, true);
};
```

#### في ActivityLog
```typescript
const formatTimestamp = (timestamp: number): string => {
  return formatRelativeDate(timestamp, false);
};
```

#### في TaskDetail
```typescript
<span>تم الإنشاء {formatRelativeDate(task.createdAt, false)}</span>
```

## الدوال المساعدة (Helper Functions)

### isToday(timestamp)
تحقق إذا كان التاريخ اليوم

```typescript
if (isToday(timestamp)) {
  // التاريخ اليوم
}
```

### isTomorrow(timestamp)
تحقق إذا كان التاريخ غداً

```typescript
if (isTomorrow(timestamp)) {
  // التاريخ غداً
}
```

### isYesterday(timestamp)
تحقق إذا كان التاريخ أمس

```typescript
if (isYesterday(timestamp)) {
  // التاريخ أمس
}
```

### isDayAfterTomorrow(timestamp)
تحقق إذا كان التاريخ بعد غد

```typescript
if (isDayAfterTomorrow(timestamp)) {
  // التاريخ بعد غد
}
```

## قواعد الجمع العربية (Arabic Pluralization)

الدالة تدعم قواعد الجمع الصحيحة في اللغة العربية حسب القواعد النحوية:

### القواعد (Rules)

- **1** → المفرد: "دقيقة" / "ساعة" / "يوم"
- **2** → المثنى: "دقيقتان" / "ساعتان" / "يومان"
- **3-10** → جمع القلة: "دقائق" / "ساعات" / "أيام"
- **11+** → جمع الكثرة: "دقيقة" / "ساعة" / "يوم"

### أمثلة (Examples)

#### الدقائق
- منذ **دقيقة** (1)
- منذ **دقيقتان** (2)
- منذ 5 **دقائق** (3-10)
- منذ 15 **دقيقة** (11+)

#### الساعات
- منذ **ساعة** (1)
- منذ **ساعتان** (2)
- منذ 5 **ساعات** (3-10)
- منذ 12 **ساعة** (11+)

#### الأيام
- منذ **يوم** (1)
- منذ **يومان** (2)
- منذ 5 **أيام** (3-10)
- منذ 15 **يوم** (11+)

### دالة getArabicPlural

```typescript
/**
 * Get the correct Arabic plural form for a number
 */
export const getArabicPlural = (
  count: number,
  singular: string,    // المفرد
  dual: string,        // المثنى
  plural: string,      // جمع القلة (3-10)
  pluralMany: string   // جمع الكثرة (11+)
): string
```

#### استخدام (Usage)

```typescript
// دقائق
getArabicPlural(1, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة')  // "دقيقة"
getArabicPlural(2, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة')  // "دقيقتان"
getArabicPlural(5, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة')  // "دقائق"
getArabicPlural(15, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة') // "دقيقة"

// ساعات
getArabicPlural(1, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')  // "ساعة"
getArabicPlural(2, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')  // "ساعتان"
getArabicPlural(8, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')  // "ساعات"
getArabicPlural(24, 'ساعة', 'ساعتان', 'ساعات', 'ساعة') // "ساعة"
```

## الأماكن المحدثة (Updated Locations)

تم تطبيق التنسيق النسبي في:

1. **DeadlineBadge** - عرض مواعيد التسليم
2. **ActivityLog** - سجل النشاط والأحداث
3. **TaskDetail** - تواريخ التعليقات والردود وإنشاء المهام
4. **FinishedTasks** - تواريخ إنشاء المهام المنتهية

## الفوائد (Benefits)

✅ **سهولة القراءة** - فهم سريع للتواريخ القريبة  
✅ **تجربة مستخدم أفضل** - لغة طبيعية بدلاً من أرقام  
✅ **دعم كامل للعربية** - قواعد جمع صحيحة  
✅ **مرونة** - خيار إظهار أو إخفاء الوقت  
✅ **ذكي** - يختار التنسيق المناسب تلقائياً  

## ملاحظات تقنية (Technical Notes)

- جميع التواريخ تُخزن كـ `timestamp` (milliseconds)
- التنسيق يحدث فقط عند العرض
- لا تأثير على البيانات المخزنة
- متوافق مع جميع المتصفحات الحديثة
- يستخدم `toLocaleDateString` و `toLocaleTimeString` للتنسيق النهائي

## الإصدار (Version)

تمت الإضافة في الإصدار **2.1.0**
