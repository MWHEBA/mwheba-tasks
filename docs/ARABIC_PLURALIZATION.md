# قواعد الجمع العربية في النظام
# Arabic Pluralization Rules in the System

## نظرة عامة (Overview)

تم تطبيق قواعد الجمع العربية الصحيحة في جميع أنحاء النظام لتحسين تجربة المستخدم وجعل النصوص أكثر طبيعية ودقة نحوياً.

## القواعد النحوية (Grammar Rules)

### المفرد (Singular) - العدد 1
يُستخدم المفرد عندما يكون العدد واحداً فقط.

**أمثلة:**
- منذ **دقيقة**
- منذ **ساعة**
- منذ **يوم**
- **سنة** واحدة

### المثنى (Dual) - العدد 2
يُستخدم المثنى عندما يكون العدد اثنين.

**أمثلة:**
- منذ **دقيقتان**
- منذ **ساعتان**
- منذ **يومان**
- **سنتان**

**ملاحظة:** في حالة المثنى، لا نكتب الرقم "2" قبل الكلمة، بل نكتفي بصيغة المثنى.

### جمع القلة (Plural - Few) - الأعداد 3-10
يُستخدم جمع القلة للأعداد من 3 إلى 10.

**أمثلة:**
- منذ 5 **دقائق**
- منذ 7 **ساعات**
- منذ 3 **أيام**
- 10 **سنوات**

### جمع الكثرة (Plural - Many) - الأعداد 11+
يُستخدم المفرد مع الأعداد من 11 فما فوق.

**أمثلة:**
- منذ 15 **دقيقة**
- منذ 12 **ساعة**
- منذ 20 **يوم**
- 100 **سنة**

## التطبيق في الكود (Implementation)

### دالة getArabicPlural

```typescript
export const getArabicPlural = (
  count: number,
  singular: string,    // المفرد (1)
  dual: string,        // المثنى (2)
  plural: string,      // جمع القلة (3-10)
  pluralMany: string   // جمع الكثرة (11+)
): string => {
  if (count === 1) {
    return singular;
  } else if (count === 2) {
    return dual;
  } else if (count >= 3 && count <= 10) {
    return plural;
  } else {
    return pluralMany;
  }
};
```

### أمثلة الاستخدام (Usage Examples)

#### الدقائق (Minutes)

```typescript
// 1 دقيقة
const word1 = getArabicPlural(1, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة');
console.log(`منذ ${word1}`); // "منذ دقيقة"

// 2 دقيقة
const word2 = getArabicPlural(2, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة');
console.log(`منذ ${word2}`); // "منذ دقيقتان"

// 5 دقائق
const word5 = getArabicPlural(5, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة');
console.log(`منذ 5 ${word5}`); // "منذ 5 دقائق"

// 15 دقيقة
const word15 = getArabicPlural(15, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة');
console.log(`منذ 15 ${word15}`); // "منذ 15 دقيقة"
```

#### الساعات (Hours)

```typescript
getArabicPlural(1, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')   // "ساعة"
getArabicPlural(2, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')   // "ساعتان"
getArabicPlural(8, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')   // "ساعات"
getArabicPlural(24, 'ساعة', 'ساعتان', 'ساعات', 'ساعة')  // "ساعة"
```

#### الأيام (Days)

```typescript
getArabicPlural(1, 'يوم', 'يومان', 'أيام', 'يوم')   // "يوم"
getArabicPlural(2, 'يوم', 'يومان', 'أيام', 'يوم')   // "يومان"
getArabicPlural(7, 'يوم', 'يومان', 'أيام', 'يوم')   // "أيام"
getArabicPlural(30, 'يوم', 'يومان', 'أيام', 'يوم')  // "يوم"
```

#### الأشهر (Months)

```typescript
getArabicPlural(1, 'شهر', 'شهران', 'أشهر', 'شهر')   // "شهر"
getArabicPlural(2, 'شهر', 'شهران', 'أشهر', 'شهر')   // "شهران"
getArabicPlural(6, 'شهر', 'شهران', 'أشهر', 'شهر')   // "أشهر"
getArabicPlural(12, 'شهر', 'شهران', 'أشهر', 'شهر')  // "شهر"
```

#### السنوات (Years)

```typescript
getArabicPlural(1, 'سنة', 'سنتان', 'سنوات', 'سنة')   // "سنة"
getArabicPlural(2, 'سنة', 'سنتان', 'سنوات', 'سنة')   // "سنتان"
getArabicPlural(5, 'سنة', 'سنتان', 'سنوات', 'سنة')   // "سنوات"
getArabicPlural(20, 'سنة', 'سنتان', 'سنوات', 'سنة')  // "سنة"
```

## التطبيق في الدوال (Function Integration)

### formatRelativeDate

```typescript
// للماضي
if (minutes < 60) {
  const minuteWord = getArabicPlural(minutes, 'دقيقة', 'دقيقتان', 'دقائق', 'دقيقة');
  return `منذ ${minutes === 2 ? '' : minutes + ' '}${minuteWord}`;
}

// للمستقبل
if (days < 7) {
  const dayWord = getArabicPlural(days, 'يوم', 'يومان', 'أيام', 'يوم');
  return `بعد ${days === 2 ? '' : days + ' '}${dayWord}${timeStr}`;
}
```

### getRelativeTime

```typescript
if (hours > 0) {
  const hourWord = getArabicPlural(hours, 'ساعة', 'ساعتان', 'ساعات', 'ساعة');
  return `منذ ${hours === 2 ? '' : hours + ' '}${hourWord}`;
}
```

### formatTimeRemaining

```typescript
if (days > 0) {
  const dayWord = getArabicPlural(days, 'يوم', 'يومان', 'أيام', 'يوم');
  return `${days === 2 ? '' : days + ' '}${dayWord} ${days === 2 ? 'متبقيان' : 'متبقية'}`;
}
```

## ملحوظات خاصة (Special Notes)

### المثنى بدون رقم
في حالة المثنى (2)، لا نكتب الرقم قبل الكلمة:

✅ **صحيح:**
- منذ **دقيقتان**
- منذ **ساعتان**
- بعد **يومان**

❌ **خطأ:**
- منذ 2 دقيقتان
- منذ 2 ساعتان
- بعد 2 يومان

### التذكير والتأنيث
الدالة تدعم التذكير والتأنيث حسب الكلمة:

**مؤنث:**
- دقيقة → دقيقتان → دقائق → دقيقة
- ساعة → ساعتان → ساعات → ساعة
- سنة → سنتان → سنوات → سنة

**مذكر:**
- يوم → يومان → أيام → يوم
- شهر → شهران → أشهر → شهر

### الصفات المرافقة
عند استخدام صفات مع الأعداد، يجب مراعاة التطابق:

**للمثنى:**
- يومان **متبقيان** (مذكر)
- ساعتان **متبقيتان** (مؤنث)

**للجمع:**
- 5 أيام **متبقية**
- 5 ساعات **متبقية**

## الفوائد (Benefits)

✅ **دقة نحوية** - التزام بقواعد اللغة العربية الصحيحة  
✅ **احترافية** - نصوص طبيعية وسلسة  
✅ **تجربة مستخدم أفضل** - سهولة القراءة والفهم  
✅ **قابلية إعادة الاستخدام** - دالة واحدة لجميع الحالات  
✅ **سهولة الصيانة** - تعديل القواعد في مكان واحد  

## اختبار الدالة (Testing)

يمكنك اختبار الدالة باستخدام ملف الأمثلة:

```bash
# تشغيل ملف الأمثلة
npx ts-node utils/dateUtils.test.examples.ts
```

سيعرض الملف جميع الحالات المختلفة مع النتائج المتوقعة.

## المراجع (References)

- [قواعد العدد في اللغة العربية](https://www.alukah.net/literature_language/0/2345/)
- [المفرد والمثنى والجمع](https://www.drmosad.com/index56.htm)

## الإصدار (Version)

تمت الإضافة في الإصدار **2.1.0**

---

**ملاحظة:** هذه القواعد تطبق في جميع أنحاء النظام تلقائياً عند استخدام دوال التواريخ.
